"use strict";angular.module("lelylan-lab",["ngAnimate","ngRoute","ngTouch","oauth","naif.base64","lelylan-lab.client.project","lelylan-lab.client.category","lelylan-lab.utils","config"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/projects.html",controller:"ProjectsCtrl"}).when("/yours",{templateUrl:"views/projects.html",controller:"YoursCtrl"}).when("/create",{templateUrl:"views/create.html",controller:"CreateCtrl"}).when("/edit/:id",{templateUrl:"views/edit.html",controller:"EditCtrl"}).when("/show/:id",{templateUrl:"views/show.html",controller:"ShowCtrl"}).when("/delete/:id",{templateUrl:"views/delete.html",controller:"DeleteCtrl"}).when("/projects/all",{templateUrl:"views/projects.html",controller:"ProjectsCtrl"}).when("/projects/:category",{templateUrl:"views/projects.html",controller:"ProjectsCtrl"}).when("/categories",{templateUrl:"views/categories.html",controller:"CategoriesCtrl"}).when("/access_token=:accessToken",{template:"",controller:["$location","AccessToken",function(a,b){var c=a.path().substr(1);b.setTokenFromString(c),a.path("/"),a.replace()}]}).otherwise({redirectTo:"/"})}]),angular.module("lelylan-lab").controller("ApplicationCtrl",["$scope","$rootScope","$timeout","AccessToken","Category","Project","Endpoint","ENV",function(a,b,c,d,e,f,g,h){a.credentials=h.credentials,c(function(){a.logged=!!d.get()},0),e.all().success(function(b){a.menuTags=b}),f.public().success(function(b){a.total=b.length}),a.$on("oauth:expired",function(){g.redirect()}),b.predicate="-count"}]),angular.module("lelylan-lab").controller("ProjectsCtrl",["$scope","$rootScope","$routeParams","Project","ENV",function(a,b,c,d){b.page="projects",b.params={},c.category&&"all"!=c.category&&(b.params.tag=c.category),d.public(b.params).success(function(b){a.projects=b})}]),angular.module("lelylan-lab").controller("CategoriesCtrl",["$scope","$rootScope","Category",function(a,b,c){b.page="categories",c.all().success(function(b){a.tags=b})}]),angular.module("lelylan-lab").controller("YoursCtrl",["$scope","$rootScope","Project",function(a,b,c){b.page="yours",c.all().success(function(b){a.projects=b})}]),angular.module("lelylan-lab").controller("ShowCtrl",["$scope","$rootScope","$routeParams","$location","Project",function(a,b,c,d,e){b.page="yours",e.find(c.id).success(function(b){a.project=b})}]),angular.module("lelylan-lab").controller("CreateCtrl",["$scope","$rootScope","$location","Project",function(a,b,c,d){b.page="create",a.project={},a.create=function(b){(!a.sending||a.form.$invalid)&&(a.sending=!0,d.create(b).success(function(b){c.path("/show/"+b.id),a.sending=!1}).error(function(){a.errors="You need to complete the required fields",a.sending=!1}))}}]),angular.module("lelylan-lab").controller("EditCtrl",["$scope","$rootScope","$routeParams","$location","Project",function(a,b,c,d,e){b.page="yours",e.find(c.id).success(function(b){a.project=b}),a.update=function(b){a.sending&&a.form.$invalid||(a.sending=!0,e.update(c.id,b).success(function(b){d.path("/show/"+b.id),a.sending=!1}).error(function(){a.errors="You need to complete the required fields",a.sending=!1}))}}]),angular.module("lelylan-lab").controller("DeleteCtrl",["$scope","$rootScope","$routeParams","$location","Project",function(a,b,c,d,e){b.page="yours",e.find(c.id).success(function(b){a.project=b}),a.delete=function(){e.delete(c.id).success(function(){d.path("/yours")})}}]),angular.module("lelylan-lab").provider("lelylanLabClientConfig",function(){var a;return a={endpoint:"http://lelylan-lab.herokuapp.com"},{configure:function(b){return angular.extend(a,b)},$get:function(){return a}}});var client=angular.module("lelylan-lab.utils",[]);client.factory("LelylanLabClientUtils",["AccessToken",function(a){var b={};return b.headers=function(){return a.get()?{Authorization:"Bearer "+a.get().access_token}:{}},b.merge=function(a,b){for(var c in b)a[c]=b[c];return a},b}]);var client=angular.module("lelylan-lab.client.project",[]);client.factory("Project",["$http","lelylanLabClientConfig","LelylanLabClientUtils",function(a,b,c){var d={},e=b.endpoint+"/projects";return d.find=function(b,d){var f={headers:c.headers()};return a.get(e+"/"+b,c.merge(f,d))},d.all=function(b,d){var f={params:b,headers:c.headers()};return a.get(e,c.merge(f,d))},d.public=function(b,d){var f={params:b};return a.get(e+"/public",c.merge(f,d))},d.create=function(b,d){var f={headers:c.headers()};return a.post(e,b,c.merge(f,d))},d.update=function(b,d,f){var g={headers:c.headers()};return a.put(e+"/"+b,d,c.merge(g,f))},d.delete=function(b,d){var f={headers:c.headers()};return a.delete(e+"/"+b,c.merge(f,d))},d}]);var client=angular.module("lelylan-lab.client.category",[]);client.factory("Category",["$http","lelylanLabClientConfig","LelylanLabClientUtils",function(a,b,c){var d={},e=b.endpoint+"/tags";return d.all=function(b,d){var f={params:b,headers:c.headers()};return a.get(e,c.merge(f,d))},d}]),angular.module("config",[]).constant("ENV",{name:"production",endpoint:"http://lelylan-lab.herokuapp.com",credentials:{site:"http://people.lelylan.com",clientId:"c5297d9ad0710a3cfcd5983f369c8333c6cff60df1f2672cd5d3b2fed270c0d7",redirectUri:"http://lelylan.github.io/lab-dashboard-ng",profileUri:"http://api.lelylan.com/me"}});